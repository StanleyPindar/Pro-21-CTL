import{c as q,j as e,C as U,v as T,e as F,V as Q,Z as K,y as V,w as G,H as J,s as k,i as Y,k as Z,r as b,n as X,X as ee,M as te,U as ie,a as se}from"./index-BtruPY50.js";import{U as ae}from"./user-C_8IjWSk.js";import{E as ne}from"./EmailCaptureModal-Hv-wUzSl.js";import{R as re}from"./rotate-ccw-BAtjdT_e.js";import{C as oe}from"./chevron-left-DcCbMcAB.js";import"./lock-BfwCluQ8.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=q("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=q("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=q("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=q("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),me=({currentStep:i,totalSteps:s,completedSteps:l=[]})=>{const a=Math.round(i/s*100);return e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40 shadow-sm",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["Step ",i," of ",s]}),e.jsx("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"Medical Cannabis Eligibility Assessment"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[a,"%"]}),e.jsx("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"Complete"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-600 to-green-600 rounded-full transition-all duration-500 ease-out relative",style:{width:`${a}%`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 animate-pulse"})})}),e.jsx("div",{className:"flex justify-between mt-2",children:Array.from({length:Math.min(5,s)}).map((d,n)=>{const t=Math.floor(n*s/4)+1,r=i>t,o=i===t;return e.jsx("div",{className:`flex flex-col items-center ${n===0?"items-start":n===4?"items-end":"items-center"}`,children:e.jsx("div",{className:`
                      w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium transition-all duration-300
                      ${r?"bg-green-600 text-white shadow-md":o?"bg-blue-600 text-white shadow-md ring-4 ring-blue-100":"bg-gray-200 text-gray-500"}
                    `,children:r?e.jsx(U,{className:"w-5 h-5"}):t})},n)})})]}),i>0&&i<s&&e.jsx("div",{className:"mt-3 text-center",children:e.jsxs("p",{className:"text-xs text-gray-600",children:[s-i," ",s-i===1?"question":"questions"," remaining"]})})]})})},pe={activity:T,heart:J,"cloud-rain":le,"alert-circle":G,moon:V,zap:K,brain:Q,shield:F,user:ae,compass:ce,"more-horizontal":ue,cpu:de,bone:T},he=({question:i,value:s,onChange:l})=>{const a=t=>{l(t)},d=t=>{const r=Array.isArray(s)?s:[];r.includes(t)?l(r.filter(o=>o!==t)):l([...r,t])},n=t=>Array.isArray(s)?s.includes(t):s===t;if(i.type==="visual-cards")return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:i.question}),e.jsx("p",{className:"text-gray-600",children:"Select the condition that best describes your situation"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:i.options.map(t=>{const r=t.icon?pe[t.icon]:T,o=n(t.value);return e.jsxs("button",{onClick:()=>a(t.value),className:`
                  relative p-6 rounded-xl border-2 transition-all duration-200 text-left
                  ${o?"border-blue-600 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-sm"}
                `,children:[e.jsxs("div",{className:"flex flex-col items-start space-y-3",children:[e.jsx("div",{className:`
                    p-3 rounded-lg transition-colors
                    ${o?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"}
                  `,children:e.jsx(r,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold text-lg mb-1 ${o?"text-blue-900":"text-gray-900"}`,children:t.label}),e.jsx("p",{className:`text-sm ${o?"text-blue-700":"text-gray-600"}`,children:t.description})]})]}),o&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})})]},t.value)})})]});if(i.type==="scale"){const t=typeof s=="string"?parseInt(s):0;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:i.question}),e.jsx("p",{className:"text-gray-600",children:"Rate your symptoms from 1 (minimal) to 10 (debilitating)"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative pt-8 pb-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Minimal"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Moderate"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Debilitating"})]}),e.jsx("div",{className:"relative h-2 bg-gradient-to-r from-green-200 via-yellow-200 to-red-200 rounded-full",children:e.jsx("div",{className:"absolute h-4 w-4 bg-blue-600 rounded-full shadow-lg -top-1 transform -translate-x-1/2 cursor-pointer",style:{left:`${t/10*100}%`}})}),e.jsx("input",{type:"range",min:"1",max:"10",value:t||1,onChange:r=>a(r.target.value),className:"absolute top-0 left-0 w-full h-16 opacity-0 cursor-pointer"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2",children:i.options.map(r=>{const o=parseInt(r.value),u=t===o;return e.jsxs("button",{onClick:()=>a(r.value),className:`
                    p-4 rounded-lg border-2 text-center transition-all duration-200
                    ${u?"border-blue-600 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300"}
                  `,children:[e.jsx("div",{className:`text-2xl font-bold mb-1 ${u?"text-blue-600":"text-gray-900"}`,children:r.value}),e.jsx("div",{className:`text-xs ${u?"text-blue-700":"text-gray-600"}`,children:r.description})]},r.value)})})]}),t>0&&e.jsx("div",{className:`
            p-4 rounded-lg border-2
            ${t<=3?"border-green-200 bg-green-50":t<=6?"border-yellow-200 bg-yellow-50":"border-red-200 bg-red-50"}
          `,children:e.jsxs("p",{className:`font-medium ${t<=3?"text-green-900":t<=6?"text-yellow-900":"text-red-900"}`,children:[t<=3&&"Mild symptoms - manageable with some support",t>3&&t<=6&&"Moderate symptoms - significantly impacting daily life",t>6&&"Severe symptoms - major impact on quality of life"]})})]})}return i.type==="multiple"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:i.question}),e.jsx("p",{className:"text-gray-600",children:"Select all that apply"})]}),e.jsx("div",{className:"space-y-3",children:i.options.map(t=>{const r=n(t.value);return e.jsxs("button",{onClick:()=>d(t.value),className:`
                  w-full p-4 rounded-lg border-2 text-left transition-all duration-200 flex items-start space-x-4
                  ${r?"border-blue-600 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-sm"}
                `,children:[e.jsx("div",{className:`
                  flex-shrink-0 w-6 h-6 rounded border-2 flex items-center justify-center transition-colors
                  ${r?"border-blue-600 bg-blue-600":"border-gray-300 bg-white"}
                `,children:r&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`font-medium mb-1 ${r?"text-blue-900":"text-gray-900"}`,children:t.label}),t.description&&e.jsx("div",{className:`text-sm ${r?"text-blue-700":"text-gray-600"}`,children:t.description})]})]},t.value)})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:i.question}),e.jsx("p",{className:"text-gray-600",children:"Select the option that best applies to you"})]}),e.jsx("div",{className:"space-y-3",children:i.options.map(t=>{const r=n(t.value);return e.jsx("button",{onClick:()=>a(t.value),className:`
                w-full p-4 rounded-lg border-2 text-left transition-all duration-200
                ${r?"border-blue-600 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-sm"}
              `,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`font-medium mb-1 ${r?"text-blue-900":"text-gray-900"}`,children:t.label}),t.description&&e.jsx("div",{className:`text-sm ${r?"text-blue-700":"text-gray-600"}`,children:t.description})]}),e.jsx("div",{className:`
                  flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center ml-4 transition-colors
                  ${r?"border-blue-600 bg-blue-600":"border-gray-300 bg-white"}
                `,children:r&&e.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})]})},t.value)})})]})},ge=[{value:"otc-painkillers",label:"OTC painkillers",category:"medication"},{value:"prescription-painkillers",label:"Prescription painkillers",category:"medication"},{value:"anti-inflammatories",label:"Anti-inflammatories",category:"medication"},{value:"muscle-relaxants",label:"Muscle relaxants",category:"medication"},{value:"antidepressants",label:"Antidepressants for pain",category:"medication"},{value:"physiotherapy",label:"Physiotherapy",category:"physical"},{value:"steroid-injections",label:"Steroid injections",category:"physical"},{value:"surgery",label:"Surgery",category:"physical"},{value:"alternative-therapies",label:"Alternative therapies",category:"alternative"},{value:"none",label:"None",category:"alternative"}],ye=[{value:"antidepressants",label:"Antidepressants",category:"medication"},{value:"anti-anxiety",label:"Anti-anxiety medications",category:"medication"},{value:"mood-stabilizers",label:"Mood stabilizers",category:"medication"},{value:"antipsychotics",label:"Antipsychotics",category:"medication"},{value:"talking-therapy",label:"Talking therapy",category:"therapy"},{value:"cbt",label:"CBT (Cognitive Behavioral Therapy)",category:"therapy"},{value:"emdr",label:"EMDR",category:"therapy"},{value:"mindfulness",label:"Mindfulness programs",category:"therapy"},{value:"alternative-therapies",label:"Alternative therapies",category:"alternative"},{value:"none",label:"None",category:"alternative"}],be=[{value:"sleeping-pills",label:"Sleeping pills",category:"medication"},{value:"melatonin",label:"Melatonin supplements",category:"medication"},{value:"antihistamines",label:"Antihistamines",category:"medication"},{value:"cbt-insomnia",label:"CBT for insomnia",category:"therapy"},{value:"sleep-hygiene",label:"Sleep hygiene programs",category:"therapy"},{value:"relaxation-techniques",label:"Relaxation techniques",category:"alternative"},{value:"none",label:"None",category:"alternative"}],fe=[{value:"anti-epileptics",label:"Anti-epileptic drugs",category:"medication"},{value:"disease-modifying",label:"Disease-modifying therapies",category:"medication"},{value:"steroids",label:"Steroids",category:"medication"},{value:"immunosuppressants",label:"Immunosuppressants",category:"medication"},{value:"physiotherapy",label:"Physiotherapy",category:"physical"},{value:"occupational-therapy",label:"Occupational therapy",category:"therapy"},{value:"surgery",label:"Surgery",category:"physical"},{value:"none",label:"None",category:"alternative"}],ve=[{value:"prescription-meds",label:"Prescription medications",category:"medication"},{value:"otc-treatments",label:"Over-the-counter treatments",category:"medication"},{value:"therapy",label:"Therapy/counseling",category:"therapy"},{value:"physical-therapy",label:"Physical therapy",category:"physical"},{value:"alternative-medicine",label:"Alternative medicine",category:"alternative"},{value:"none",label:"None",category:"alternative"}],j=[{id:"condition",question:"Which condition are you seeking treatment for?",type:"visual-cards",required:!0,options:[{value:"chronic-pain",label:"Chronic Pain",description:"Back pain, arthritis, fibromyalgia, neuropathic pain",icon:"activity"},{value:"anxiety",label:"Anxiety",description:"Generalized anxiety, panic attacks, social anxiety",icon:"heart"},{value:"depression",label:"Depression",description:"Major depressive disorder, persistent low mood",icon:"cloud-rain"},{value:"ptsd",label:"PTSD",description:"Post-traumatic stress disorder",icon:"alert-circle"},{value:"insomnia",label:"Insomnia",description:"Sleep disorders, difficulty sleeping",icon:"moon"},{value:"epilepsy",label:"Epilepsy",description:"Seizures, treatment-resistant epilepsy",icon:"zap"},{value:"multiple-sclerosis",label:"Multiple Sclerosis",description:"MS symptoms, spasticity, pain",icon:"brain"},{value:"ibd",label:"IBD",description:"Crohn's disease, ulcerative colitis",icon:"activity"},{value:"tourette",label:"Tourette Syndrome",description:"Tic disorders",icon:"user"},{value:"cancer",label:"Cancer Side Effects",description:"Chemotherapy side effects, pain management",icon:"shield"},{value:"fibromyalgia",label:"Fibromyalgia",description:"Widespread pain, fatigue",icon:"compass"},{value:"arthritis",label:"Arthritis",description:"Joint pain and inflammation",icon:"bone"},{value:"other-neurological",label:"Other Neurological",description:"Parkinson's, dystonia, other conditions",icon:"cpu"},{value:"other",label:"Other Qualifying",description:"Other condition not listed",icon:"more-horizontal"}]},{id:"duration",question:"How long have you been experiencing this condition?",type:"single",required:!0,options:[{value:"under-6-months",label:"Less than 6 months",description:"Recent onset"},{value:"6-12-months",label:"6 months - 1 year",description:"Developing condition"},{value:"1-2-years",label:"1-2 years",description:"Established condition"},{value:"2-5-years",label:"2-5 years",description:"Long-term condition"},{value:"5-10-years",label:"5-10 years",description:"Chronic condition"},{value:"over-10-years",label:"More than 10 years",description:"Long-standing condition"}]},{id:"severity",question:"How would you rate the severity of your symptoms?",type:"scale",required:!0,options:[{value:"1",label:"1 - Minimal",description:"Barely noticeable"},{value:"2",label:"2",description:"Very mild"},{value:"3",label:"3 - Mild",description:"Noticeable but manageable"},{value:"4",label:"4",description:"Mild to moderate"},{value:"5",label:"5",description:"Moderate discomfort"},{value:"6",label:"6 - Moderate",description:"Significant discomfort, some daily impact"},{value:"7",label:"7",description:"Moderate to severe"},{value:"8",label:"8 - Severe",description:"Major daily life impact"},{value:"9",label:"9",description:"Very severe"},{value:"10",label:"10 - Debilitating",description:"Unable to function normally"}]},{id:"treatment-status",question:"What is your current treatment status?",type:"single",required:!0,options:[{value:"no-treatment",label:"Not receiving any treatment",description:"Currently untreated"},{value:"nhs-inadequate",label:"NHS treatment but inadequate relief",description:"Current NHS care insufficient"},{value:"private-inadequate",label:"Private treatment but inadequate relief",description:"Private care not working"},{value:"multiple-failed",label:"Multiple treatments with little success",description:"Tried many options"},{value:"side-effects",label:"Current medication with significant side effects",description:"Treatment causing problems"},{value:"between-treatments",label:"Between treatments, seeking alternatives",description:"Looking for new options"}]},{id:"previous-treatments",question:"Which treatments have you previously tried?",type:"multiple",required:!0,skipLogic:i=>i["treatment-status"]==="no-treatment",options:[]},{id:"treatment-effectiveness",question:"How effective were these previous treatments?",type:"single",required:!0,skipLogic:i=>i["treatment-status"]==="no-treatment",options:[{value:"initially-effective",label:"Very effective initially, but decreased over time",description:"Lost effectiveness"},{value:"somewhat-effective",label:"Somewhat effective but insufficient relief",description:"Partial benefit only"},{value:"minimal",label:"Minimal effectiveness, little improvement",description:"Limited benefit"},{value:"side-effects",label:"Effective but unacceptable side effects",description:"Side effects too severe"},{value:"worse",label:"Made symptoms worse",description:"Negative reaction"},{value:"nothing-worked",label:"Nothing has worked",description:"No benefit from any treatment"}]},{id:"side-effects",question:"Have you experienced side effects from previous treatments?",type:"single",required:!0,skipLogic:i=>i["treatment-status"]==="no-treatment",options:[{value:"none",label:"No significant side effects",description:"Well tolerated"},{value:"mild",label:"Mild, manageable side effects",description:"Minor issues only"},{value:"moderate",label:"Moderate side effects affecting daily life",description:"Noticeable impact"},{value:"severe",label:"Severe side effects requiring treatment stoppage",description:"Had to stop treatment"},{value:"worse-than-condition",label:"Side effects worse than original condition",description:"Treatment worse than illness"}]},{id:"medication-concerns",question:"What concerns do you have about your current medications?",type:"multiple",required:!0,options:[{value:"not-effective",label:"Not effective enough",description:"Insufficient symptom relief"},{value:"side-effects",label:"Too many side effects",description:"Causing other problems"},{value:"dependency",label:"Dependency/addiction concerns",description:"Worried about dependence"},{value:"cost",label:"Cost of medications",description:"Too expensive"},{value:"interactions",label:"Drug interactions",description:"Conflicts with other meds"},{value:"long-term-effects",label:"Long-term health effects",description:"Worried about future impact"},{value:"no-concerns",label:"No concerns",description:"Satisfied with current treatment"},{value:"not-taking",label:"Not taking medications",description:"Currently not medicated"}]},{id:"lifestyle-impact",question:"How does your condition impact your daily life?",type:"multiple",required:!0,options:[{value:"sleep",label:"Sleep difficulties",description:"Trouble sleeping or poor quality sleep"},{value:"work-study",label:"Work/study concentration problems",description:"Difficulty focusing or performing"},{value:"physical-activity",label:"Reduced physical activity",description:"Can't exercise or move normally"},{value:"social",label:"Relationship/social impact",description:"Affects relationships and social life"},{value:"household",label:"Household task difficulties",description:"Struggle with daily chores"},{value:"appetite",label:"Appetite/eating issues",description:"Changes in eating patterns"},{value:"mood",label:"Mood changes",description:"Emotional ups and downs"},{value:"financial",label:"Financial impact",description:"Medical costs or lost income"},{value:"help-needed",label:"Need help with daily activities",description:"Require assistance from others"},{value:"minimal",label:"Minimal impact",description:"Life relatively unaffected"}]},{id:"work-situation",question:"What is your current work situation?",type:"single",required:!0,options:[{value:"full-time",label:"Full-time employed",description:"35+ hours per week"},{value:"part-time",label:"Part-time employed",description:"Less than 35 hours per week"},{value:"self-employed",label:"Self-employed",description:"Running own business"},{value:"unable-work",label:"Unable to work due to condition",description:"Condition prevents employment"},{value:"retired",label:"Retired",description:"No longer working"},{value:"student",label:"Student",description:"In education"},{value:"unemployed",label:"Unemployed (not condition-related)",description:"Not working for other reasons"}]},{id:"treatment-goals",question:"What are your primary treatment goals?",type:"multiple",required:!0,options:[{value:"complete-relief",label:"Complete symptom relief",description:"Eliminate all symptoms"},{value:"significant-reduction",label:"Significant symptom reduction",description:"Major improvement"},{value:"better-sleep",label:"Better sleep quality",description:"Improve rest and recovery"},{value:"reduced-medication",label:"Reduced medication reliance",description:"Take fewer medications"},{value:"quality-of-life",label:"Improved quality of life",description:"Better overall wellbeing"},{value:"return-activities",label:"Return to normal activities",description:"Resume regular life"},{value:"pain-management",label:"Pain management for activities",description:"Enable movement and exercise"},{value:"mood-stabilization",label:"Mood stabilization",description:"Emotional balance"}]},{id:"consultation-preference",question:"What is your preferred consultation format?",type:"single",required:!0,options:[{value:"in-person",label:"In-person at clinic",description:"Face-to-face appointment"},{value:"video",label:"Video consultation",description:"Online video call"},{value:"phone",label:"Phone consultation",description:"Telephone appointment"},{value:"no-preference",label:"No preference (fastest)",description:"Whatever is available soonest"},{value:"depends-location",label:"Depends on location",description:"Based on clinic proximity"}]},{id:"budget",question:"What is your monthly budget for treatment?",type:"single",required:!0,options:[{value:"under-100",label:"Under £100/month",description:"Budget-conscious"},{value:"100-200",label:"£100-200/month",description:"Moderate budget"},{value:"200-300",label:"£200-300/month",description:"Flexible budget"},{value:"300-500",label:"£300-500/month",description:"Higher budget"},{value:"500-plus",label:"£500+/month",description:"Premium budget"},{value:"need-info",label:"Need to understand costs first",description:"Want more information"},{value:"not-concern",label:"Budget not a concern",description:"Cost not limiting factor"}]},{id:"timeline",question:"When are you looking to start treatment?",type:"single",required:!0,options:[{value:"asap",label:"ASAP (this week)",description:"Urgent need"},{value:"2-weeks",label:"Within 2 weeks",description:"Soon but not urgent"},{value:"1-month",label:"Within 1 month",description:"No rush"},{value:"3-months",label:"Within 3 months",description:"Planning ahead"},{value:"researching",label:"Just researching",description:"Gathering information"},{value:"depends",label:"Depends on finding right clinic",description:"Quality over speed"}]},{id:"information-source",question:"How did you learn about medical cannabis treatment?",type:"single",required:!0,options:[{value:"healthcare-professional",label:"Healthcare professional",description:"Doctor or medical provider"},{value:"online-research",label:"Online research",description:"Internet searching"},{value:"friend-family",label:"Friend/family recommendation",description:"Personal referral"},{value:"social-media",label:"Social media/forums",description:"Online communities"},{value:"news-media",label:"News/media coverage",description:"Articles or news stories"},{value:"support-groups",label:"Patient support groups",description:"Condition-specific groups"},{value:"other-patients",label:"Other patients",description:"Patient testimonials"},{value:"clinic-advertising",label:"Clinic advertising",description:"Clinic marketing"}]}];function xe(i){switch(i){case"chronic-pain":case"fibromyalgia":case"arthritis":return ge;case"anxiety":case"depression":case"ptsd":return ye;case"insomnia":return be;case"epilepsy":case"multiple-sclerosis":case"other-neurological":return fe;default:return ve}}class C{static generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static getSessionId(){const s="ctq_session_id";let l=localStorage.getItem(s);return l||(l=this.generateSessionId(),localStorage.setItem(s,l)),l}static async saveProgress(s,l,a){try{const{data:d}=await k.from("eligibility_assessments").select("id").eq("session_id",s).maybeSingle(),n={session_id:s,current_step:l,responses:a,email:a.email||null,name:a.name||null,condition:a.condition||null,severity:a.severity?parseInt(a.severity):null,completed:!1,updated_at:new Date().toISOString()};d?await k.from("eligibility_assessments").update(n).eq("id",d.id):await k.from("eligibility_assessments").insert({...n,started_at:new Date().toISOString()}),localStorage.setItem("ctq_eligibility_progress",JSON.stringify({currentStep:l,responses:a,sessionId:s,savedAt:Date.now()}))}catch(d){console.error("Error saving progress:",d)}}static async trackStepCompletion(s,l,a,d,n){try{await k.from("assessment_analytics").insert({assessment_id:s,step_number:l,step_name:a,response_value:d,time_spent_seconds:n,timestamp:new Date().toISOString()})}catch(t){console.error("Error tracking step:",t)}}static async saveAssessmentResult(s,l,a,d,n){try{const t=new Date().toISOString(),r=localStorage.getItem("ctq_assessment_started"),o=r?new Date(parseInt(r)):new Date,u=Math.floor((new Date(t).getTime()-o.getTime())/1e3),{data:h,error:p}=await k.from("eligibility_assessments").update({responses:l,condition:l.condition,severity:l.severity?parseInt(l.severity):null,eligibility_status:a,eligibility_confidence:d,matched_clinics:n,completed:!0,current_step:15,completed_at:t,completion_time_seconds:u}).eq("session_id",s).select("id").single();if(p)throw p;if(h&&n.length>0){const x=n.map((v,g)=>({assessment_id:h.id,clinic_id:v.clinicId,clinic_name:v.clinicName,match_score:v.score,match_percentage:v.percentage,match_reasons:v.reasons,score_breakdown:v.breakdown,ranking:g+1}));await k.from("assessment_clinic_matches").insert(x)}return localStorage.removeItem("ctq_eligibility_progress"),localStorage.removeItem("ctq_assessment_started"),(h==null?void 0:h.id)||null}catch(t){return console.error("Error saving assessment result:",t),null}}static async recordDropoff(s,l,a){try{await k.from("assessment_dropoffs").insert({session_id:s,email:a.email||null,last_completed_step:l,total_steps:15,responses_json:a,dropped_at:new Date().toISOString()})}catch(d){console.error("Error recording dropoff:",d)}}static loadProgress(){try{const s=localStorage.getItem("ctq_eligibility_progress");if(!s)return null;const l=JSON.parse(s),a=l.savedAt||0;return(Date.now()-a)/(1e3*60*60)>24?(localStorage.removeItem("ctq_eligibility_progress"),null):{currentStep:l.currentStep||1,responses:l.responses||{},sessionId:l.sessionId||this.getSessionId()}}catch(s){return console.error("Error loading progress:",s),null}}static clearProgress(){localStorage.removeItem("ctq_eligibility_progress"),localStorage.removeItem("ctq_assessment_started")}}function we(i){const s=i.condition,l=i.duration,a=parseInt(i.severity)||0,d=i["treatment-status"],n=i["treatment-effectiveness"],t=i["side-effects"];let r=0;const o=[],u=[];s&&s!=="none"&&(r+=25,o.push(`You have a qualifying condition (${R(s)})`)),Ae(l)>=3?(r+=15,o.push(`Condition duration of ${Ee(l)} shows established chronic nature`)):o.push("Recent onset - some clinics may want to see longer treatment history"),a>=5?(r+=20,o.push(`Moderate to severe symptom severity (${a}/10) demonstrates significant impact`)):a>=3&&(r+=10,o.push("Mild to moderate symptoms showing noticeable impact")),d!=="no-treatment"?(r+=20,o.push("Previous conventional treatment experience supports eligibility"),n&&["minimal","nothing-worked","worse","side-effects"].includes(n)&&(r+=15,o.push("Inadequate response to conventional treatments is a key eligibility criterion")),t&&["moderate","severe","worse-than-condition"].includes(t)&&(r+=5,o.push("Significant side effects from previous treatments support alternative therapy consideration"))):o.push("No previous treatment history - clinics typically require evidence of conventional treatment attempts first");let p;return r>=80?(p="highly_likely",u.push("Book a consultation with a specialist clinic as soon as possible"),u.push("Gather your medical records and treatment history"),u.push("Prepare a list of current medications and previous treatments"),u.push("Consider which consultation format works best for you")):r>=60?(p="likely",u.push("Schedule a consultation to discuss your eligibility in detail"),u.push("Collect documentation of your condition and treatment history"),u.push("Research clinics specializing in your condition"),u.push("Prepare questions about treatment options and costs")):r>=40?(p="possible",u.push("Continue with conventional treatments as advised by your doctor"),u.push("Keep detailed records of treatment effectiveness and side effects"),u.push("Consider consultation if conventional treatments remain inadequate"),u.push("Monitor your symptoms and document their impact on daily life")):(p="educational",u.push("Focus on conventional treatment options with your healthcare provider"),u.push("Maintain detailed records of your symptoms and treatments"),u.push("Revisit medical cannabis as an option if other treatments prove inadequate"),u.push("Stay informed about evolving UK medical cannabis regulations")),{status:p,confidence:Math.min(r,100),reasoning:o,recommendedActions:u}}function Ne(i,s){if(!Array.isArray(s)||s.length===0)return console.warn("No clinics available for matching"),[];const l=i.condition,a=i.budget,d=i["consultation-preference"],n=i.timeline,t=parseInt(i.severity)||0;return s.map(o=>{var u,h,p,x,v;if(!o||!o.overview)return console.warn("Invalid clinic data encountered:",o),null;try{let g=0;const y=[],f={conditionMatch:0,budgetAlignment:0,formatMatch:0,timeline:0,successRate:0},_=je(o,l,t);f.conditionMatch=_,g+=_*.4,_>70&&y.push(`Specializes in ${R(l)} treatment`);const M=Se(o,a);f.budgetAlignment=M,g+=M*.25,M>70&&y.push("Pricing aligns well with your budget");const w=ke(o,d);f.formatMatch=w,g+=w*.15,w===100&&d!=="no-preference"&&y.push(`Offers your preferred ${d.replace("-"," ")} consultation`);const N=Me(o,n);f.timeline=N,g+=N*.1,N>80&&n==="asap"&&y.push("Fast appointment availability");const A=Ce(o);return f.successRate=A,g+=A*.1,((u=o.patientExperience)==null?void 0:u.overallRating)>=4.5&&y.push(`Excellent patient reviews (${o.patientExperience.overallRating}/5.0)`),(h=o.services)!=null&&h.urgentAppointments&&n==="asap"&&y.push("Offers urgent appointments"),(p=o.services)!=null&&p.homeDelivery&&y.push("Provides home delivery service"),(x=o.pharmacy)!=null&&x.inHousePharmacy&&y.push("Has in-house pharmacy for convenience"),{clinicId:o.overview.id,clinicName:o.overview.name,score:Math.round(g),percentage:Math.round(g),reasons:y.slice(0,4),breakdown:f}}catch(g){return console.error("Error scoring clinic:",(v=o.overview)==null?void 0:v.name,g),null}}).filter(o=>o!==null).sort((o,u)=>u.score-o.score).slice(0,5)}function je(i,s,l){var r,o,u;const a=((r=i.services)==null?void 0:r.conditions)||[],d=((o=i.services)==null?void 0:o.specialties)||[],n=_e(s);let t=0;for(const h of n)a.some(p=>p.toLowerCase().includes(h.toLowerCase()))&&(t+=40),d.some(p=>p.toLowerCase().includes(h.toLowerCase()))&&(t+=30);return l>=7&&((u=i.services)!=null&&u.urgentAppointments)&&(t+=10),Math.min(t,100)}function Se(i,s){var o,u,h,p;(u=(o=i.pricing)==null?void 0:o.initialConsultation)!=null&&u.price;const a=(((p=(h=i.pricing)==null?void 0:h.followUpConsultation)==null?void 0:p.price)||50)+100,n={"under-100":{min:0,max:100},"100-200":{min:100,max:200},"200-300":{min:200,max:300},"300-500":{min:300,max:500},"500-plus":{min:500,max:1e4},"need-info":{min:0,max:300},"not-concern":{min:0,max:1e4}}[s]||{min:0,max:300};if(a>=n.min&&a<=n.max)return 100;if(a<n.min)return 90;const t=a-n.max,r=Math.max(0,100-t/n.max*100);return Math.round(r)}function ke(i,s){var n;if(s==="no-preference"||s==="depends-location")return 100;const l=((n=i.services)==null?void 0:n.consultationTypes)||[],d={"in-person":"in-person",video:"video",phone:"phone"}[s];return d?l.includes(d)?100:40:100}function Me(i,s){var d,n;const l=((d=i.patientExperience)==null?void 0:d.nextAvailableAppointment)||"",a=((n=i.services)==null?void 0:n.urgentAppointments)||!1;return s==="researching"||s==="depends"?100:s==="asap"?a?100:60:s==="2-weeks"?l.includes("week")?90:70:80}function Ce(i){var d,n;const s=((d=i.patientExperience)==null?void 0:d.overallRating)||0,l=((n=i.patientExperience)==null?void 0:n.totalReviews)||0;let a=s/5*100;return l>100?a=Math.min(a+10,100):l<10&&(a=a*.8),Math.round(a)}function _e(i){return{"chronic-pain":["pain","chronic pain","neuropathic"],anxiety:["anxiety","mental health","GAD"],depression:["depression","mental health","mood"],ptsd:["PTSD","trauma","mental health"],insomnia:["insomnia","sleep","sleep disorders"],epilepsy:["epilepsy","seizures","neurological"],"multiple-sclerosis":["multiple sclerosis","MS","neurological"],ibd:["IBD","Crohn","colitis","inflammatory"],tourette:["Tourette","tic","neurological"],cancer:["cancer","oncology","chemotherapy"],fibromyalgia:["fibromyalgia","pain","chronic"],arthritis:["arthritis","joint","pain"],"other-neurological":["neurological","brain","nerve"],other:["general","chronic"]}[i]||["general"]}function R(i){return{"chronic-pain":"Chronic Pain",anxiety:"Anxiety",depression:"Depression",ptsd:"PTSD",insomnia:"Insomnia",epilepsy:"Epilepsy","multiple-sclerosis":"Multiple Sclerosis",ibd:"IBD",tourette:"Tourette Syndrome",cancer:"Cancer Side Effects",fibromyalgia:"Fibromyalgia",arthritis:"Arthritis","other-neurological":"Neurological Condition",other:"Qualifying Condition"}[i]||i}function Ae(i){return{"under-6-months":3,"6-12-months":9,"1-2-years":18,"2-5-years":42,"5-10-years":90,"over-10-years":120}[i]||0}function Ee(i){return{"under-6-months":"less than 6 months","6-12-months":"6-12 months","1-2-years":"1-2 years","2-5-years":"2-5 years","5-10-years":"5-10 years","over-10-years":"over 10 years"}[i]||i}const Le=()=>{const i=Y(),{clinics:s,isLoading:l}=Z(),[a,d]=b.useState(1),[n,t]=b.useState({}),[r,o]=b.useState(""),[u,h]=b.useState(!1),[p,x]=b.useState(!1),[v,g]=b.useState(Date.now()),[y,f]=b.useState(!1),[_]=b.useState(1247),[M,w]=b.useState(null);b.useEffect(()=>{const c=C.getSessionId();o(c);const m=C.loadProgress();return m&&(t(m.responses),d(m.currentStep),o(m.sessionId),x(!!m.responses.email)),localStorage.setItem("ctq_assessment_started",Date.now().toString()),()=>{a<j.length&&a>0&&C.recordDropoff(r,a,n)}},[]),b.useEffect(()=>{g(Date.now())},[a]),b.useEffect(()=>{a>0&&Object.keys(n).length>0&&C.saveProgress(r,a,n)},[a,n,r]);const N=()=>{let c=j[a-1];if(c.id==="previous-treatments"){const m=n.condition,S=xe(m);c={...c,options:S.map(E=>({value:E.value,label:E.label,description:""}))}}return c},A=c=>c.skipLogic?c.skipLogic(n):!1,P=c=>{const m=N();t(S=>({...S,[m.id]:c}))},D=async()=>{if(N(),a===3&&!p){h(!0);return}let c=a+1;for(;c<=j.length&&A(j[c-1]);)c++;c>j.length?await B():d(c)},L=c=>{t(m=>({...m,email:c.email,name:c.name})),x(!0),h(!1)},$=()=>{x(!0),h(!1)},O=()=>{window.confirm("Are you sure you want to restart the assessment? All progress will be lost.")&&(C.clearProgress(),d(1),t({}),x(!1),w(null),f(!1),localStorage.setItem("ctq_assessment_started",Date.now().toString()))},z=()=>{if(a>1){let c=a-1;for(;c>0&&A(j[c-1]);)c--;d(Math.max(1,c))}},B=async()=>{f(!0),w(null);try{if(console.log("Calculating eligibility with responses:",n),console.log("Clinics loading:",l),console.log("Available clinics:",(s==null?void 0:s.length)||0),!n.condition)throw new Error("Missing condition information");if(l){w("Loading clinic data, please wait a moment and try again..."),f(!1);return}const c=we(n);console.log("Eligibility calculated:",c);const m=Array.isArray(s)?s:[];console.log("Valid clinics count:",m.length),m.length===0&&console.warn("No clinics available - proceeding without clinic matches");const S=m.length>0?Ne(n,m):[];console.log("Clinic matches:",S.length),C.saveAssessmentResult(r,n,c.status,c.confidence,S).catch(E=>{console.error("Error saving assessment to database:",E)}),i("/eligibility/results",{state:{eligibility:c,clinicMatches:S,responses:n}})}catch(c){console.error("Error calculating eligibility:",c),console.error("Error details:",c),console.error("Stack:",c instanceof Error?c.stack:"No stack"),w(`Unable to calculate results: ${c instanceof Error?c.message:"Unknown error"}. Please try again.`),f(!1)}},H=()=>{const c=N(),m=n[c.id];return m?Array.isArray(m)?m.length>0:m.trim()!=="":!1},I=N(),W=n[I.id]||(I.type==="multiple"?[]:"");return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs(X,{to:"/",className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(ee,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"Exit Assessment"})]}),e.jsxs("button",{onClick:O,className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(re,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"Reset"})]})]})})}),e.jsx(te,{title:"Medical Cannabis Eligibility Assessment UK - Check If You Qualify",description:"Take our comprehensive 15-question medical cannabis eligibility assessment. Get personalized clinic recommendations and understand your qualification status in minutes.",keywords:["medical cannabis eligibility assessment","qualify for medical cannabis UK","cannabis clinic finder","medical cannabis prescription UK","eligibility checker medical cannabis"],canonicalUrl:"https://comparetheleaf.co.uk/eligibility"}),e.jsx(me,{currentStep:a,totalSteps:j.length}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[a===1&&e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Medical Cannabis Eligibility Assessment"}),e.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"Complete our comprehensive assessment to understand your eligibility and get matched with specialist clinics"}),e.jsxs("div",{className:"inline-flex items-center space-x-2 text-sm text-gray-500 bg-white px-4 py-2 rounded-full shadow-sm",children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsxs("span",{children:[_.toLocaleString()," people have completed this assessment"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-10 mb-8",children:[e.jsx(he,{question:I,value:W,onChange:P}),e.jsxs("div",{className:"mt-10 pt-6 border-t border-gray-200",children:[M&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",children:[e.jsx("p",{className:"font-medium",children:M}),e.jsx("button",{onClick:()=>w(null),className:"mt-2 text-sm underline hover:no-underline",children:"Dismiss"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[a>1&&e.jsxs("button",{onClick:z,className:"inline-flex items-center px-6 py-3 text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200 shadow-sm",children:[e.jsx(oe,{className:"mr-2 h-5 w-5"}),"Back"]}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{onClick:D,disabled:!H()||y,className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-600 to-green-600 text-white text-lg font-medium rounded-xl hover:from-blue-700 hover:to-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:y?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:a<j.length?"Next Question":"Get Results"}),e.jsx(se,{className:"ml-2 h-5 w-5"})]})})]})]})]}),e.jsx("div",{className:"text-center text-sm text-gray-500",children:e.jsx("p",{children:"Your responses are saved automatically. You can return anytime within 24 hours."})})]}),e.jsx(ne,{isOpen:u,onClose:$,onSubmit:L})]})};export{Le as default};
