import{r as o,j as e,d as c,X as f,C as i,s as n}from"./index-B-Us_xoZ.js";import{U as p}from"./user-DhAmF6b1.js";import{L as b}from"./lock-BHPiG-UL.js";const v=({isOpen:m,onClose:t,onSubmit:r})=>{const[a,s]=o.useState(""),[d,u]=o.useState(""),[x,h]=o.useState(!1);if(!m)return null;const g=l=>{l.preventDefault(),a&&(h(!0),r({email:a,name:d}))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-green-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(c,{className:"h-6 w-6 text-blue-600 mr-2"}),"Get Your Detailed Results"]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(f,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("p",{className:"text-gray-700 mb-6 text-lg",children:"Enter your email to unlock:"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx(i,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 text-lg",children:"Full clinic profiles and specializations"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(i,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 text-lg",children:"Detailed pricing and appointment availability"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(i,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 text-lg",children:"Direct booking links"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(i,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 text-lg",children:"Personalized strain recommendations"})]})]})]}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-base font-medium text-gray-700 mb-2",children:"Email Address*"}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"email",type:"email",value:a,onChange:l=>s(l.target.value),placeholder:"your.email@example.com",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-base font-medium text-gray-700 mb-2",children:"Your Name (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"name",type:"text",value:d,onChange:l=>u(l.target.value),placeholder:"John Smith",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"})]})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx("button",{type:"submit",disabled:x||!a,className:"w-full bg-gradient-to-r from-blue-600 to-green-600 text-white py-4 px-6 rounded-lg hover:from-blue-700 hover:to-green-700 transition-all duration-200 font-medium text-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center shadow-md hover:shadow-lg",children:x?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"h-5 w-5 mr-2"}),"Get My Results"]})})}),e.jsxs("div",{className:"mt-6 flex items-start",children:[e.jsx(b,{className:"h-4 w-4 text-gray-400 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-xs text-gray-500",children:"We'll only use your email to send your results and occasional updates about medical cannabis. You can unsubscribe at any time. See our Privacy Policy for more information."})]})]})]})]})})};class w{static async saveQuizUser(t){try{if(!n)return{success:!1,error:"Database not available"};const{data:r}=await n.from("users").select("id").eq("email",t.email).single(),a={email:t.email,first_name:t.name,quiz_responses:t.quiz_responses,quiz_completed:!0,updated_at:new Date().toISOString()};let s;return r?s=await n.from("users").update(a).eq("id",r.id).select().single():s=await n.from("users").insert({...a,created_at:new Date().toISOString()}).select().single(),s.error?(console.error("Error saving user:",s.error),{success:!1,error:s.error.message}):{success:!0,data:s.data}}catch(r){return console.error("UserService error:",r),{success:!1,error:"Unexpected error"}}}}export{v as E,w as U};
